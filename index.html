<!DOCTYPE html>
<html lang="cs-CZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improapka</title>
</head>
<body>

<style>
/*menší velikost obrazovky na PC, velikost obrazovky mobil*/
@media only screen and (max-width: 600px) {
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.carousel-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  width: 100%;
  height: 100%;
}

button.arrowLeft {
  font-size: 10vw;
  margin-left: 2vw;
  margin-right: -7vw;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 10;
  display: inline-block !important;
}

button.arrowRight {
  font-size: 10vw;
  margin-left: -7vw;
  margin-right: 2vw;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 10;
  display: inline-block !important;
}

.container {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  max-width: 1200px !important;
  padding: 40px 20px;
  margin: 50px auto;
  box-sizing: border-box;
  min-height: calc(100vh - 80px);
}

.slide {
  display: none;
  flex-shrink: 0;
  width: 100%;
  justify-content: center;
  align-items: center;
}

.slide.active {
  display: flex;
}

.items {
  text-align: center;
}

div.textStyle {
  background-color: lightgray;
  color: black;
  border-radius: 8vw;
  font-size: 6vw !important;
  padding: 4vw !important;
  margin-top: 4vh !important;
  font-family: Arial, Helvetica, sans-serif;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}

.images {
  width: 60vw !important;
}

.counterstyle {
  font-size: 4vw !important;
  font-family: Arial, Helvetica, sans-serif;
}

button.resetbutton {
  background-color: rgb(60, 60, 60);
  color: rgb(255, 255, 255);
  border-radius: 8vw;
  font-size: 6vw !important;
  padding: 2vw !important;
  margin: 1.5vh !important;
  font-family: Arial, Helvetica, sans-serif;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
}
}

/*normální velikost obrazovky na PC*/
html, body {
  height: 100%;
  margin: 0;
}

.container {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  max-width: 1200px !important;
  padding: 40px 20px;
  margin: 50px auto;
  box-sizing: border-box;
  min-height: calc(100vh - 80px);
}


.items {
  text-align: center;
  align-items: center;
  width: 100%;
}

#itemstyle {
  width: 100%;
  align-items: center;
}

.textStyle {
  background-color: lightgray;
  color: black;
  border-radius: 5vw;
  font-size: 2.5vw;
  padding: 1.2vw;
  margin-top: 3vw !important;
  font-family: Arial, Helvetica, sans-serif;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  align-items: center;
  width: 80%;
  margin: 0 auto;
}

.arrowLeft, .arrowRight {
  font-size: 2rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 1rem;
  z-index: 10;
  display: none;
}

.images {
  width: 25vw;
  align-items: center;
  text-align: center;
}

.counterstyle {
  font-size: 2vw;
  font-family: Arial, Helvetica, sans-serif;
}

.resetbutton {
  background-color: rgb(60, 60, 60);
  color: rgb(255, 255, 255);
  border-radius: 5vw;
  font-size: 2.5vw;
  padding: 1vw;
  margin: 1vw !important;
  font-family: Arial, Helvetica, sans-serif;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  width: 50%;
  border: none;
  margin: auto;
}

.resetitem {
  align-items: center;
  text-align: center;
}

</style>
</head>

<body>
  <div class="carousel-container">
    <button class="arrowLeft" onclick="showPrevious()">←</button>
      
  <div class="container">
    <div class="slide emoce" id="itemstyle">
      <div class="items">
      <!-- placeholder obrázek (emoce) ↓ -->
        <img src="Images/Bag3.png" alt="emoce" class="images" onclick="handleBagClick(this); showWordEmoce()">
          <p class="counterstyle">
            <span id="counterEmoce"></span> / <span>75</span>
          </p>
          <div class="resetitem">
            <button onclick="resetSlide('emoce')" class="resetbutton">↺</button>
          </div>
        <div id="randomEmoce1" class="textStyle" onclick="lockedIn('randomEmoce1')">Možnost 1</div>
        <div id="randomEmoce2" class="textStyle" onclick="lockedIn('randomEmoce2')">Možnost 2</div>
      </div>
      </div>
      
    <div class="slide povolani" id="itemstyle">
      <div class="items">
      <!-- placeholder obrázek (povolání) ↓ -->
         <img src="Images/Bag1.png" alt="povolani" class="images" onclick="handleBagClick(this); showWordPovolani()">
          <p class="counterstyle">
            <span id="counterPovolani"></span> / <span>86</span>
          </p>
          <div class="resetitem">
            <button onclick="resetSlide('povolani')" class="resetbutton">↺</button>
          </div>
        <div id="randomPovolani1" class="textStyle" onclick="lockedIn('randomPovolani1')">Možnost 1</div>
        <div id="randomPovolani2" class="textStyle" onclick="lockedIn('randomPovolani2')">Možnost 2</div>
        </div>
      </div>

    <div class="slide misto" id="itemstyle">
      <div class="items">
      <!-- placeholder obrázek (místo) ↓ -->
        <img src="Images/Bag2.png" alt="misto" class="images" onclick="handleBagClick(this); showWordMisto()">
          <p class="counterstyle">
            <span id="counterMisto"></span> / <span>90</span>
          </p>
          <div class="resetitem">
            <button onclick="resetSlide('misto')" class="resetbutton">↺</button>
          </div>
        <div id="randomMisto1" class="textStyle" onclick="lockedIn('randomMisto1')">Možnost 1</div>
        <div id="randomMisto2" class="textStyle" onclick="lockedIn('randomMisto2')">Možnost 2</div>
        </div>
      </div>

  </div>

  <button class="arrowRight" onclick="showNext()">→</button>
</div>


<script>

// šipky - funkce slides
const slides = document.querySelectorAll('.slide');
let currentIndex = 0;

function updateSlides() {
  slides.forEach((slide, index) => {
    slide.classList.toggle('active', index === currentIndex);
  });
}

function showPrevious() {
  currentIndex = (currentIndex - 1 + slides.length) % slides.length;
  updateSlides();
}

function showNext() {
  currentIndex = (currentIndex + 1) % slides.length;
  updateSlides();
}

updateSlides();


// funkce zamykání - kontrola
const lockedWords = {};

// counter slov - povolání
  var options1Povolani = ["průvodčí", "prodavač", "podnikatel", "cestovatel", "fotograf", "policista", "učitel", "úředník", "voják", "sportovec", "zedník", "programátor", "umělec", "mechanik", "instalatér", "zahradník", "ředitel", "popelář", "student", "rybář", "spisovatel", "trenér", "prezident", "právník", "reportér", "stylista", "horolezec", "zemědělec", "průvodce", "malíř pokojů", "taxikář", "dělník", "dřevorubec", "kurýr", "elektrikář", "doktor", "zdravotní sestra", "politik", "právník", "turista", "detektiv", "influencer", "kosmetička", "hudebník", "švec", "švadlena", "pilot", "námořník", "meteorolog", "barman", "barista", "číšník/servírka", "entomolog", "myslivec", "filozof", "parašutista", "tajný agent", "nájemný zabiják", "bylinkář", "kominík", "revizor", "bezdomovec", "realitní makléř", "vědec", "plavčík", "zločinec", "houbař", "vinař", "knihovník", "dj", "zákaznická podpora (helpdesk)", "terapeut", "kuchař", "věštkyně", "roztleskávačka", "ostraha", "režisér", "umývač oken", "uklízečka", "stěhovák", "převozník", "psycholog", "vrátný", "kouč", "cukrář", "pekař"];
  const options2Povolani = [...options1Povolani];

  const currentCountPovolani = options1Povolani.length;
  const totalCountPovolani = 86;

document.getElementById("counterPovolani").textContent =
options1Povolani.length;



// losování slov funkce
function showWordPovolani() {

  // funkce zamykání
  if (!lockedWords.randomPovolani1) {
    const word1 = options1Povolani[Math.floor(Math.random() * options1Povolani.length)];
    document.getElementById("randomPovolani1").textContent = word1;
  }

  if (!lockedWords.randomPovolani2) {
    const word2 = options2Povolani[Math.floor(Math.random() * options2Povolani.length)];
    document.getElementById("randomPovolani2").textContent = word2;
  }
}


// counter slov - místa
  var options1Misto = ["zastávka", "park", "útes", "pláž", "kino", "vlak", "jídelna", "divadlo", "les", "koupaliště", "nádraží", "letiště", "kemp", "stan", "poušť", "loď", "kancelář", "obchod/obchodní dům", "tramvaj", "zoo", "trafika", "knihovna", "byt", "most", "letadlo", "restaurace", "ulice", "nemocnice", "pole", "tělocvična", "škola", "hory", "náves", "zámek", "vinárna", "zahrada", "muzeum", "galerie", "výtah", "čekárna", "kadeřnictví", "sauna", "tržiště", "diskotéka", "koncert", "bar", "kavárna", "vesmírná loď", "čajovna", "banka", "fronta", "pouť/lunapark", "teambuilding", "firemní večírek", "talentová soutěž", "cirkus", "mrazící box", "poslední zastávka vlaku", "u zubaře", "temné zákoutí mysli", "centrum antikonfliktního týmu", "školní jídelna", "vědecká stanice na Antarktidě", "ponorka", "očistec", "peklo", "nebe", "učňovské kadeřnictví", "pitevna", "pila", "slepičárna", "účtárna", "kuchyňka", "novorozenecké oddělení", "kuřárna", "benzínová pumpa", "šatna", "kemp", "kanoe", "karneval", "pod vodou", "zkumavka", "místo činu", "kravín", "studna", "pivní půllitr", "hranice", "zřícenina", "schůze SVJ", "přijímací pohovor"];
  const options2Misto = [...options1Misto];

  const currentCountMisto = options1Misto.length;
  const totalCountMisto = 90;

document.getElementById("counterMisto").textContent =
options1Misto.length;


// losování slov funkce
function showWordMisto() {

  // funkce zamykání
  if (!lockedWords.randomMisto1) {
    const word1 = options1Misto[Math.floor(Math.random() * options1Misto.length)];
    document.getElementById("randomMisto1").textContent = word1;
  }

  if (!lockedWords.randomMisto2) {
    const word2 = options2Misto[Math.floor(Math.random() * options2Misto.length)];
    document.getElementById("randomMisto2").textContent = word2;
  }
}


// counter slov - emoce
  var options1Emoce = ["empatie", "důvěřivost", "naivita", "výbušnost/vznětlivost", "flegmatičnost", "zamilovanost", "energičnost", "hysterie", "trpělivost", "moudrost", "škodolibost", "otupělost", "radost", "smutek", "dramatičnost", "nápaditost/kreativita", "prospěchářství", "sebestřednost", "náladovost", "lenost", "zbabělost", "statečnost", "strach", "rozmazlenost", "úzkostlivost", "cílevědomost", "houževnatost", "poslušnost", "povýšenost", "ctižádost", "aktivní", "workoholik", "serióznost/vážnost", "bezohlednost", "vytrvalost", "bezcharakterní", "bojácný", "nedůvěřivý", "roztržitý", "líný", "lehkomyslnost", "pomstychtivost", "závist", "nepřátelství", "pesimismus", "puntičkářství", "neohroženost", "velkorysost", "vynalézavost", "rozvážnost", "stydlivost", "přecitlivělý", "asociální", "bezstarostnost", "činorodost", "depresivní", "vychloubačnost", "konzervativní", "lhostejnost", "koketnost", "lstivost", "vztahovačnost", "stydlivost/nesmělost", "nerozhodnost", "podezíravost", "přecitlivělý", "rozpustilost", "vášnivý/temperamentní", "zodpovědnost", "nezodpovědnost", "zapomětlivost", "záludnost", "impulsivní", "zbrklý", "hrdost"];
  const options2Emoce = [...options1Emoce];

  const currentCountEmoce = options1Emoce.length;
  const totalCountEmoce = 74;

document.getElementById("counterEmoce").textContent =
options1Emoce.length;



// losování slov funkce
function showWordEmoce() {

   // funkce zamykání
    if (!lockedWords.randomEmoce1) {
      const word1 = options1Emoce[Math.floor(Math.random() * options1Emoce.length)];
      document.getElementById("randomEmoce1").textContent = word1;
  }

    if (!lockedWords.randomEmoce2) {
      const word2 = options2Emoce[Math.floor(Math.random() * options2Emoce.length)];
      document.getElementById("randomEmoce2").textContent = word2;
  }
}
 


function lockedIn(id) {
  if (lockedWords[id]) return;

  lockedWords[id] = true;

  const element = document.getElementById(id);
  const chosenWord = element.textContent.trim();
  element.style.color = "gray";
  element.style.background = "gainsboro";


  const suffix = id.endsWith("1") ? "2" : "1";
  const otherId = id.slice(0, -1) + suffix;
  const otherElement = document.getElementById(otherId);
  if (otherElement) {
    otherElement.remove();
  }


  const slide = element.closest(".slide");
  const img = slide.querySelector("img");
  if (img) {
    img.src = "Images/BagChosen.png";
  }


if (id.includes("Povolani")) {
  removeWordFromList(options1Povolani, chosenWord);
  removeWordFromList(options2Povolani, chosenWord);
  refreshCounterPovolani();
  saveList('povolani', options1Povolani);

  if (options1Povolani.length <= 1) {
    resetSlide('povolani');
    refreshCounterPovolani();
  }

} else if (id.includes("Misto")) {
  removeWordFromList(options1Misto, chosenWord);
  removeWordFromList(options2Misto, chosenWord);
  refreshCounterMisto();
  saveList('misto', options1Misto);

  if (options1Misto.length <= 1) {
    resetSlide('misto');
    refreshCounterMisto();
  }
} else if (id.includes("Emoce")) {
  removeWordFromList(options1Emoce, chosenWord);
  removeWordFromList(options2Emoce, chosenWord);
  refreshCounterEmoce();
  saveList('emoce', options1Emoce);

  if (options1Emoce.length <= 1) {
    resetSlide('emoce');
    refreshCounterEmoce();
  }
}


}

function removeWordFromList(list, word) {
  if (list) {
    const index = list.indexOf(word);
    if (index > -1) {
      list.splice(index, 1);
    }
  }
}

function refreshCounterPovolani() {
  document.getElementById("counterPovolani").textContent =
    options1Povolani.length;
}


function refreshCounterMisto() {
  document.getElementById("counterMisto").textContent =
    options1Misto.length;
}

function refreshCounterEmoce() {
  document.getElementById("counterEmoce").textContent =
    options1Emoce.length;
}

function handleBagClick(imgElement) {
  const slide = imgElement.closest(".slide");
  const lockedElement = Array.from(slide.querySelectorAll(".textStyle"))
    .find(el => lockedWords[el.id]);

  if (!lockedElement) return;

  const id = lockedElement.id;
  lockedWords[id] = false;


  lockedElement.style.color = "";
  lockedElement.style.background = "";


  const suffix = id.endsWith("1") ? "2" : "1";
  const otherId = id.slice(0, -1) + suffix;
  if (!document.getElementById(otherId)) {
    const recreated = document.createElement("div");
    recreated.id = otherId;
    recreated.className = lockedElement.className;
    recreated.textContent = lockedElement.textContent;
    recreated.onclick = () => lockedIn(otherId);
    lockedElement.parentElement.appendChild(recreated);
  }

  if (imgElement.alt === "povolani") {
    imgElement.src = "Images/Bag1.png";
  } else if (imgElement.alt === "misto") {
    imgElement.src = "Images/Bag2.png";
  } else if (imgElement.alt === "emoce") {
    imgElement.src = "Images/Bag3.png";
  }
}


// reset funkce
const slideConfig = {
  emoce: {
    original: ["empatie", "důvěřivost", "naivita", "výbušnost/vznětlivost", "flegmatičnost", "zamilovanost", "energičnost", "hysterie", "trpělivost", "moudrost", "škodolibost", "otupělost", "radost", "smutek", "dramatičnost", "nápaditost/kreativita", "prospěchářství", "sebestřednost", "náladovost", "lenost", "zbabělost", "statečnost", "strach", "rozmazlenost", "úzkostlivost", "cílevědomost", "houževnatost", "poslušnost", "povýšenost", "ctižádost", "aktivní", "workoholik", "serióznost/vážnost", "bezohlednost", "vytrvalost", "bezcharakterní", "bojácný", "nedůvěřivý", "roztržitý", "líný", "lehkomyslnost", "pomstychtivost", "závist", "nepřátelství", "pesimismus", "puntičkářství", "neohroženost", "velkorysost", "vynalézavost", "rozvážnost", "stydlivost", "přecitlivělý", "asociální", "bezstarostnost", "činorodost", "depresivní", "vychloubačnost", "konzervativní", "lhostejnost", "koketnost", "lstivost", "vztahovačnost", "stydlivost/nesmělost", "nerozhodnost", "podezíravost", "přecitlivělý", "rozpustilost", "vášnivý/temperamentní", "zodpovědnost", "nezodpovědnost", "zapomětlivost", "záludnost", "impulsivní", "zbrklý", "hrdost"],
    options1: options1Emoce,
    options2: options2Emoce,
    word1Id: "randomEmoce1",
    word2Id: "randomEmoce2",
    counterId: "counterEmoce",
    defaultImage: "Images/Bag3.png"
  },
  povolani: {
    original: ["průvodčí", "prodavač", "podnikatel", "cestovatel", "fotograf", "policista", "učitel", "úředník", "voják", "sportovec", "zedník", "programátor", "umělec", "mechanik", "instalatér", "zahradník", "ředitel", "popelář", "student", "rybář", "spisovatel", "trenér", "prezident", "právník", "reportér", "stylista", "horolezec", "zemědělec", "průvodce", "malíř pokojů", "taxikář", "dělník", "dřevorubec", "kurýr", "elektrikář", "doktor", "zdravotní sestra", "politik", "právník", "turista", "detektiv", "influencer", "kosmetička", "hudebník", "švec", "švadlena", "pilot", "námořník", "meteorolog", "barman", "barista", "číšník/servírka", "entomolog", "myslivec", "filozof", "parašutista", "tajný agent", "nájemný zabiják", "bylinkář", "kominík", "revizor", "bezdomovec", "realitní makléř", "vědec", "plavčík", "zločinec", "houbař", "vinař", "knihovník", "dj", "zákaznická podpora (helpdesk)", "terapeut", "kuchař", "věštkyně", "roztleskávačka", "ostraha", "režisér", "umývač oken", "uklízečka", "stěhovák", "převozník", "psycholog", "vrátný", "kouč", "cukrář", "pekař"],
    options1: options1Povolani,
    options2: options2Povolani,
    word1Id: "randomPovolani1",
    word2Id: "randomPovolani2",
    counterId: "counterPovolani",
    defaultImage: "Images/Bag1.png"
  },
  misto: {
    original: ["zastávka", "park", "útes", "pláž", "kino", "vlak", "jídelna", "divadlo", "les", "koupaliště", "nádraží", "letiště", "kemp", "stan", "poušť", "loď", "kancelář", "obchod/obchodní dům", "tramvaj", "zoo", "trafika", "knihovna", "byt", "most", "letadlo", "restaurace", "ulice", "nemocnice", "pole", "tělocvična", "škola", "hory", "náves", "zámek", "vinárna", "zahrada", "muzeum", "galerie", "výtah", "čekárna", "kadeřnictví", "sauna", "tržiště", "diskotéka", "koncert", "bar", "kavárna", "vesmírná loď", "čajovna", "banka", "fronta", "pouť/lunapark", "teambuilding", "firemní večírek", "talentová soutěž", "cirkus", "mrazící box", "poslední zastávka vlaku", "u zubaře", "temné zákoutí mysli", "centrum antikonfliktního týmu", "školní jídelna", "vědecká stanice na Antarktidě", "ponorka", "očistec", "peklo", "nebe", "učňovské kadeřnictví", "pitevna", "pila", "slepičárna", "účtárna", "kuchyňka", "novorozenecké oddělení", "kuřárna", "benzínová pumpa", "šatna", "kemp", "kanoe", "karneval", "pod vodou", "zkumavka", "místo činu", "kravín", "studna", "pivní půllitr", "hranice", "zřícenina", "schůze SVJ", "přijímací pohovor"],
    options1: options1Misto,
    options2: options2Misto,
    word1Id: "randomMisto1",
    word2Id: "randomMisto2",
    counterId: "counterMisto",
    defaultImage: "Images/Bag2.png"
  }
};

function resetSlide(category) {
  const config = slideConfig[category];
  if (!config) return;

  const { original, options1, options2, word1Id, word2Id, counterId, defaultImage } = config;

  options1.length = 0;
  options2.length = 0;
  options1.push(...original);
  options2.push(...original);

  [word1Id, word2Id].forEach(id => {
    lockedWords[id] = false;
    let el = document.getElementById(id);

    if (!el) {
      el = document.createElement("div");
      el.id = id;
      el.className = "textStyle";
      el.textContent = id.endsWith("1") ? "Možnost 1" : "Možnost 2";
      el.onclick = () => lockedIn(id);
      document.getElementById(word1Id).parentElement.appendChild(el);
    } else {
      el.style.color = "";
      el.style.background = "";
      el.textContent = id.endsWith("1") ? "Možnost 1" : "Možnost 2";
    }
  });

  const slide = document.getElementById(word1Id).closest(".slide");
  const img = slide.querySelector("img");
  if (img) img.src = defaultImage;

  document.getElementById(counterId).textContent = original.length;
  if (category=='misto') {
    localStorage.setItem(category, slideConfig.misto.original);
  } else if (category=='povolani') {
    localStorage.setItem(category, slideConfig.povolani.original);
  } else  if (category=='emoce') {
    localStorage.setItem(category, slideConfig.emoce.original);
  }
}

window.onload = function() {
  console.log("Loading data");
  if (localStorage.getItem('emoce')) {
    options1Emoce = readList('emoce');
    refreshCounterEmoce();
  }
  if (localStorage.getItem('misto')) {
    options1Misto = readList('misto');
    refreshCounterMisto();
  }
  if (localStorage.getItem('povolani')) {
    options1Povolani = readList('povolani');
    refreshCounterPovolani();
  }
  console.log("Page is fully loaded!");
};

function saveList(storageKey, stringArray) {
  if (!Array.isArray(stringArray)) {
    console.error("Provided data is not an array of strings.");
    return;
  }

  try {
    var val = JSON.stringify(stringArray);
    localStorage.setItem(storageKey, val);
    console.log(`Saved list under key ${storageKey}:${val}`);
  } catch (error) {
    console.error("Failed to save list to localStorage:", error);
  }
}

function readList(storageKey) {
  return JSON.parse(localStorage.getItem(storageKey));
}


</script>


</body>
</html>
